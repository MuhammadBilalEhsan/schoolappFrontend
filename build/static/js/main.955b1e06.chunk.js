(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{153:function(e,t,a){e.exports=a.p+"static/media/img.942d917d.png"},167:function(e,t,a){},228:function(e,t,a){e.exports=a.p+"static/media/stream.86eba8bd.jpg"},259:function(e,t,a){e.exports=a(396)},264:function(e,t,a){},292:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(64),c=a.n(o),l=(a(264),a(7)),i=a(230),s=a(490),u=a(501);var d=function(){return r.a.createElement("div",null,r.a.createElement(s.a,{sx:{color:"green",backgroundColor:"#fff"},open:!0},r.a.createElement(u.a,{color:"inherit"})))},m=a(4),p=a(21),b=a(34),v=a(17),f=a.n(v),E=a(496),h=a(477),g=a(122),x=a(467),C=a(498),O=a(79),y=a(88),j=(a(292),{severHostedUrl:"https://warm-hollows-02372.herokuapp.com"}),k=a(484),S=a(478),w=function(e){var t=e.openSnack,a=e.severity,n=e.text,o=e.setOpenSnack,c=function(e,t){"clickaway"!==t&&o("")};return r.a.createElement(k.a,{anchorOrigin:{vertical:"top",horizontal:"success"===a?"center":"right"},open:Boolean(t),autoHideDuration:2500,onClose:c},r.a.createElement(S.a,{onClose:c,variant:"filled",severity:a||"success",sx:{width:"100%"}},n))},A=function(e){var t,a,o=e.setAuth,c=Object(n.useState)({email:"",password:""}),i=Object(l.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(!1),v=Object(l.a)(d,2),k=v[0],S=v[1],A=Object(n.useState)(""),I=Object(l.a)(A,2),U=I[0],_=I[1],N=Object(n.useState)(""),T=Object(l.a)(N,2),D=T[0],R=T[1],z=Object(b.g)(),L=function(e){t=e.target.name,a=e.target.value,u(Object(p.a)(Object(p.a)({},s),{},Object(m.a)({},t,a)))};return r.a.createElement(E.a,{className:"_main",display:"flex",alignItems:"center"},U?r.a.createElement(w,{openSnack:U,severity:D,text:U,setOpenSnack:_}):"",r.a.createElement(E.a,{sx:{backgroundColor:"#fff"},maxWidth:"400px",borderRadius:1,boxShadow:3,mx:"auto",p:4,pt:2,display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement("form",{method:"POST",onSubmit:function(e){return function(e){e.preventDefault(),S(!0);var t=s.email,a=s.password;t?!a||a.length<8?(_("Password! contains at least 8 characters !"),R("error"),S(!1)):f.a.post("".concat(j.severHostedUrl,"/user/login"),s).then((function(e){localStorage.setItem("uid",e.data.curUser._id),S(!1),o(!0),z.push("/profile")})).catch((function(e){S(!1),_("Invalid Credentials"),R("error")})):(S(!1),_("Please write Valid Email!"),R("error"))}(e)},style:{textAlign:"center"}},r.a.createElement(g.a,{variant:"h6",textAlign:"center"}," CY School App",r.a.createElement(x.a,{sx:{marginBottom:2}})),r.a.createElement(O.b,{className:"large-icon",color:"green",size:"50%"}),r.a.createElement(h.a,{autoFocus:!0,margin:"dense",name:"email",label:"Your Email",type:"email",variant:"outlined",value:s.email,onChange:function(e){return L(e)},autoComplete:"off",fullWidth:!0,color:"success",inputProps:{maxLength:32}}),r.a.createElement(h.a,{margin:"dense",name:"password",label:"Your Password",type:"password",variant:"outlined",value:s.password,onChange:function(e){return L(e)},autoComplete:"off",fullWidth:!0,color:"success",inputProps:{maxLength:32},sx:{marginBottom:2}}),r.a.createElement(C.a,{size:"large",type:"submit",mt:2,variant:"contained",color:"success",startIcon:r.a.createElement(y.a,{size:"22px",color:"#fff"}),fullWidth:!0,loading:k,loadingPosition:"end"},"Login"))))},I=a(6),U=a(232),_=a(504),N=a(492),T=a(499),D=a(500),R=a(475),z=a(495),L=a(172),P=a(31),W=a(20),F=function(e){return{type:"CUR_USER",payload:e}},M=function(e){return{type:"GET_COURSE",payload:e}},B=function(e){return{type:"CURRENT_COURSE",payload:e}},H=function(e){return{type:"ALL_ASSIGNMENTS",payload:e}},G=function(e){return{type:"CURRENT_ASSIGNMENT",payload:e}},Y=Object(I.a)("div")((function(e){var t=e.theme;return Object(m.a)({padding:t.spacing(1),display:"none"},t.breakpoints.up("md"),{display:"flex"})})),V=Object(I.a)("div")((function(e){var t=e.theme;return Object(m.a)({display:"none"},t.breakpoints.down("md"),{display:"flex"})})),q=function(e){var t=e.setAuth,a=(e.curUser,Object(n.useState)(null)),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Boolean(c),u=Object(b.g)(),d=Object(W.b)(),m=function(){i(null)},p=function(){d({type:"LOG_OUT"}),localStorage.removeItem("uid"),t(!1),window.location.reload(!1),u.push("/")},v=r.a.createElement(U.a,{anchorEl:c,id:"mob_menu",keepMounted:!0,open:s,onClose:m},r.a.createElement(_.a,{component:P.b,onClick:m,to:"/profile",sx:{backgroundColor:"#fff",color:"green",width:"100%",paddingBottom:2}},"Profile"),r.a.createElement(_.a,{component:P.b,onClick:m,to:"/attendance",sx:{backgroundColor:"#fff",color:"green",width:"100%",paddingBottom:2}},"Attendance"),r.a.createElement(_.a,{component:P.b,onClick:m,to:"/coursedetails",sx:{backgroundColor:"#fff",color:"green",width:"100%",paddingBottom:2}},"Course Details"),r.a.createElement(_.a,{component:P.b,onClick:m,to:"/messages",sx:{backgroundColor:"#fff",color:"green",width:"100%",paddingBottom:2}},"Messages"),r.a.createElement(_.a,{component:N.a,onClick:p,sx:{backgroundColor:"#fff",color:"red",width:"100%",paddingBottom:2}},"Log Out"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{color:"success",position:"static"},r.a.createElement(D.a,null,r.a.createElement(g.a,{component:P.b,color:"inherit",to:"/profile",variant:"h5",sx:{flexGrow:1,textDecoration:"none"}},"School App"),r.a.createElement(Y,null,r.a.createElement(N.a,{component:P.b,to:"/profile",size:"small",color:"inherit"},"Profile"),r.a.createElement(N.a,{component:P.b,to:"/attendance",size:"small",color:"inherit",sx:{marginLeft:3}},"Attendance"),r.a.createElement(N.a,{component:P.b,to:"/coursedetails",size:"small",color:"inherit",sx:{marginLeft:3}},"Course Details"),r.a.createElement(N.a,{component:P.b,to:"/messages",size:"small",color:"inherit",sx:{marginLeft:3}},"Messages"),r.a.createElement(R.a,{title:"Log Out",arrow:!0},r.a.createElement(N.a,{component:P.b,to:"/logout",sx:{marginLeft:3},onClick:p},r.a.createElement(L.a,{color:"#fff",size:"25px"})))),r.a.createElement(V,null,r.a.createElement(z.a,{color:"inherit",onClick:function(e){i(e.currentTarget)}},r.a.createElement(L.b,null))))),v)},X=a(487),J=a(488),K=a(494),Q=a(15),Z=a.n(Q),$=a(22),ee=a(505),te=a(470),ae=a(506),ne=a(507),re=a(96),oe=a(47);function ce(e){var t=e.curUser,a=e.setOpenSnack,o=e.setSeverity,c=e.setCurrentUser,i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],d=s[1],m=localStorage.getItem("uid"),p=Object(W.b)(),b=function(){d(!1)},v=Object(re.a)({initialValues:{id:m,fname:null===t||void 0===t?void 0:t.fname,lname:null===t||void 0===t?void 0:t.lname,fatherName:null===t||void 0===t?void 0:t.fatherName,atClass:null===t||void 0===t?void 0:t.atClass,age:null===t||void 0===t?void 0:t.age,phone:null===t||void 0===t?void 0:t.phone},validateOnChange:!0,validationSchema:oe.b().shape({fname:oe.c().max(12,"Plese Enter a Name less then 12 Characters").required("Please Enter First Name"),lname:oe.c().max(12,"Plese Enter a Name less then 12 Characters").required("Please Enter Last Name"),fatherName:oe.c().max(16,"Plese Enter a Name less then 16 Characters").required("Please Enter Your Father's Name"),atClass:oe.a().required().positive().integer().min(6).max(10),age:oe.a().required("It is not a good habit to hide your age.").positive("That doesn't look like a human's age.").integer("Don't use decimal point").min(10,"You are not egligible for this school, you are a baby,").max(199,"A noble human cannot live so long"),phone:oe.a().typeError("That doesn't look like a phone number").positive("A phone number can't start with a minus").integer("A phone number can't include a decimal point").min(3e9,"It doesn't looks like a phone number").max(3499999999,"It doesn't looks like a phone number").required("A phone number is required")}),onSubmit:function(){var e=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(),e.next=4,f.a.post("".concat(j.severHostedUrl,"/user/edit-profile"),t);case 4:(n=e.sent)?(c(n.data.updated),p(F(n.data.updated)),a(n.data.message),o("success")):(a("User not update!"),o("error"),b()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),b();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()});return r.a.createElement(E.a,null,r.a.createElement(R.a,{title:"Edit Profile",arrow:!0},r.a.createElement(N.a,{color:"success",variant:"contained",size:"small",onClick:function(){d(!0)}},r.a.createElement(O.c,{color:"inherit",size:"16px"}))),r.a.createElement(ee.a,{Dialog:!0,open:u,onClose:b,fullWidth:!0,maxWidth:"sm"},r.a.createElement(te.a,{align:"center",backgroundColor:"white"},"Edit Profile"),r.a.createElement(ae.a,null,r.a.createElement("form",{onSubmit:v.handleSubmit},r.a.createElement(h.a,{autoFocus:!0,margin:"dense",name:"fname",label:"First Name",type:"text",variant:"outlined",value:v.values.fname,onChange:v.handleChange("fname"),autoComplete:"off",fullWidth:!0,color:"success"}),v.errors.fname&&v.touched.fname&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.fname),r.a.createElement(h.a,{margin:"dense",name:"lname",label:"Last Name",type:"text",variant:"outlined",value:v.values.lname,onChange:v.handleChange("lname"),autoComplete:"off",fullWidth:!0,color:"success"}),v.errors.lname&&v.touched.lname&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.lname),r.a.createElement(h.a,{margin:"dense",name:"fatherName",label:"Son of",type:"text",variant:"outlined",value:v.values.fatherName,onChange:v.handleChange("fatherName"),autoComplete:"off",fullWidth:!0,color:"success"}),v.errors.fatherName&&v.touched.fatherName&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.fatherName),r.a.createElement(h.a,{margin:"dense",name:"atClass",label:"In Class",type:"number",variant:"outlined",value:v.values.atClass,onChange:v.handleChange("atClass"),autoComplete:"off",fullWidth:!0,color:"success"}),v.errors.atClass&&v.touched.atClass&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.atClass),r.a.createElement(h.a,{margin:"dense",name:"age",label:"Age",type:"number",variant:"outlined",value:v.values.age,onChange:v.handleChange("age"),autoComplete:"off",fullWidth:!0,color:"success"}),v.errors.age&&v.touched.age&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.age),r.a.createElement(R.a,{title:"Enter Phone Number Escaped 0",arrow:!0},r.a.createElement(h.a,{margin:"dense",name:"phone",label:"Contact No...",type:"number",variant:"outlined",value:v.values.phone,onChange:v.handleChange("phone"),autoComplete:"off",fullWidth:!0,color:"success"})),v.errors.phone&&v.touched.phone&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},v.errors.phone))),r.a.createElement(ne.a,null,r.a.createElement(N.a,{color:"success",variant:"contained",onClick:v.handleSubmit},"Save Edit"),r.a.createElement(N.a,{color:"success",onClick:b},"Cancel"))))}a(167);var le=a(224);function ie(e){e.curUser;var t=e.setImgURL,a=e.setSeverity,o=e.setOpenSnack,c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(null),m=Object(l.a)(d,2),p=m[0],b=m[1],v=localStorage.getItem("uid"),h=function(){u(!1)},g=function(){var e=Object($.a)(Z.a.mark((function e(n){var r,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!p){e.next=14;break}return(r=new FormData).append("_id",v),r.append("myImg",p),c={headers:{"content-type":"multipart/form-data"}},h(),e.next=10,f.a.post("".concat(j.severHostedUrl,"/user/editprofileimg"),r,c);case 10:(l=e.sent)&&(console.log("pPic",l.data.pPic),t(l.data.pPic),o(l.data.message),a("success")),e.next=16;break;case 14:o("Please Select an Image"),a("error");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),h();case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(R.a,{title:"Edit Profile Picture",arrow:!0},r.a.createElement(E.a,null,r.a.createElement(le.a,{style:{cursor:"pointer"},onClick:function(){u(!0)},size:"20px",color:"green",height:"100%"}))),r.a.createElement(ee.a,{open:s,onClose:h,fullWidth:!0,maxWidth:"xs"},r.a.createElement(te.a,{align:"center",backgroundColor:"white"},"Edit Picture"),r.a.createElement(ae.a,null,r.a.createElement("form",{method:"POST"},r.a.createElement(E.a,{display:"flex"},r.a.createElement(E.a,{flexGrow:1,pt:1,px:1,border:"1px solid green",borderRadius:1},(null===p||void 0===p?void 0:p.name)?null===p||void 0===p?void 0:p.name:"Currently No Image"),r.a.createElement(N.a,{component:"label"},r.a.createElement(O.c,{color:"green",size:"22px"}),r.a.createElement("input",{hidden:!0,name:"myImg",type:"file",accept:"image/png, image/jpeg",onChange:function(e){return function(e){var t=null===e||void 0===e?void 0:e.size,n=null===e||void 0===e?void 0:e.type;e?Boolean("image/png"===n)||Boolean("image/jpeg"===n)||Boolean("image/jpg"===n)?b(e):t>5e6?(o("please Select an image of size less then 5 mb"),a("error")):(o("you can select only image..."),a("error")):(o("please Select an image"),a("error"))}(e.target.files[0])}}))))),r.a.createElement(ne.a,null,r.a.createElement(N.a,{color:"success",variant:"contained",onClick:g},"save image"),r.a.createElement(N.a,{color:"success",onClick:h},"Cancel"))))}var se=Object(I.a)(K.a)((function(e){var t=e.theme;return Object(p.a)(Object(p.a)({},t.typography.body1),{},{padding:t.spacing(1.5),display:"flex",justifyContent:"space-between",color:"green"})})),ue=function(e){var t=e.curUser,a=e.setAuth,o=Object(n.useState)(null===t||void 0===t?void 0:t.dp),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),f=v[0],h=v[1],x=Object(n.useState)(t),C=Object(l.a)(x,2),O=C[0],y=C[1],j=O.age,k=O.atClass,S=O.email,A=O.fatherName,I=O.fname,U=O.lname,_=O.phone,N=O.roll;return r.a.createElement(E.a,{className:"_main"},r.a.createElement(q,{curUser:t,setAuth:a}),r.a.createElement(E.a,{mt:1,width:"99%",display:"flex",justifyContent:"flex-end"},r.a.createElement(ce,{curUser:t,setSeverity:h,setOpenSnack:p,setCurrentUser:y})),r.a.createElement(E.a,{width:"100%",my:"auto"},m?r.a.createElement(w,{openSnack:m,severity:f,text:m,setOpenSnack:p}):"",r.a.createElement(E.a,{width:"70%",mx:"auto",display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(X.a,{alt:"".concat(I," ").concat(U),src:i,sx:{width:"180px",height:"180px",border:"1px dashed green"},mx:"auto"})),r.a.createElement(E.a,{width:"100%",display:"flex",justifyContent:"center",position:"relative",bottom:"13px",zIndex:1},r.a.createElement(ie,{curUser:t,setImgURL:s,setSeverity:h,setOpenSnack:p})),r.a.createElement(E.a,{maxWidth:"900px",mx:"auto",mt:3,px:5,position:"relative",bottom:"30px"},r.a.createElement(J.a,{container:!0,spacing:2,justifyContent:"center"},r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Name:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},"".concat(I," ").concat(U)))),r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Email:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},S))),r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Class:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},k||r.a.createElement(g.a,{variant:"body1",color:"success"},"not Provided")))),r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Age:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},j||r.a.createElement(g.a,{variant:"body1",color:"success"},"not Provided")))),r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Son of:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},A||r.a.createElement(g.a,{variant:"body1",color:"success"},"not Provided")))),r.a.createElement(J.a,{item:!0,xs:12,md:6},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Contact:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},_||r.a.createElement(g.a,{variant:"body1",color:"success"},"not Provided")))),r.a.createElement(J.a,{item:!0,xs:12,md:6,mb:2},r.a.createElement(se,null,r.a.createElement(E.a,{width:"30%",color:"black",textAlign:"right"},"Role:"),r.a.createElement(E.a,{width:"66%",textAlign:"center"},N)))))))},de=a(476),me=a(471),pe=a(225),be=a(24),ve=a.n(be),fe=Object(I.a)(me.a)((function(e){var t,a=e.theme;return t={height:10,borderRadius:5},Object(m.a)(t,"&.".concat(pe.a.colorPrimary),{backgroundColor:a.palette.grey["light"===a.palette.mode?200:800]}),Object(m.a)(t,"& .".concat(pe.a.bar),{borderRadius:5,backgroundColor:"light"===a.palette.mode?"green":"#30e833"}),t})),Ee=Object(de.a)((function(){return{attendance_top:{textAlign:"center"}}})),he=function(e){var t=e.curUser,a=e.setAuth,o=Ee(),c=Object(n.useState)(!0),i=Object(l.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(null),m=Object(l.a)(d,2),p=m[0],b=m[1],v=Object(n.useState)(!1),h=Object(l.a)(v,2),x=h[0],C=h[1],O=Object(n.useState)(),y=Object(l.a)(O,2),k=y[0],S=y[1],A=Object(n.useState)(),I=Object(l.a)(A,2),U=I[0],_=I[1],T=Object(n.useState)(),D=Object(l.a)(T,2),R=D[0],z=D[1],L=Object(n.useState)(0),P=Object(l.a)(L,2),M=P[0],B=P[1],H=Object(n.useState)(0),G=Object(l.a)(H,2),Y=G[0],V=G[1],X=Object(n.useState)(""),J=Object(l.a)(X,2),K=J[0],Q=J[1],ee=Object(n.useState)(""),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],re=localStorage.getItem("uid"),oe=Object(W.b)(),ce=function(){if(t.attendance&&t.attendance.length>0)if(ve()(t.dateOfAddmission).date()===ve()().date()&&ve()(t.dateOfAddmission).month()===ve()().month()&&ve()(t.dateOfAddmission).year()===ve()().year())V(100);else if(ve()(t.dateOfAddmission).month()===ve()().month()&&ve()(t.dateOfAddmission).year()===ve()().year()){S(ve()(t.dateOfAddmission).date()),_(ve()(t.dateOfAddmission).month()+1),z(ve()(t.dateOfAddmission).year());var e="".concat(U,"-").concat(k,"-").concat(R),a=ve()(e,"MM-DD-YYYY").businessDiff(ve()(ve()(),"MM-DD-YYYY")),n=t.attendance,r=n[(null===n||void 0===n?void 0:n.length)-1].days.length;V(r/a*100)}else if(1===ve()().date())V(100);else{var o;_(ve()().month()+1),z(ve()().year());var c="".concat(U,"-01-").concat(R),l=ve()(c,"MM-DD-YYYY").businessDiff(ve()(ve()(),"MM-DD-YYYY")),i=null===t||void 0===t?void 0:t.attendance,s=null===(o=i[(null===i||void 0===i?void 0:i.length)-1].days)||void 0===o?void 0:o.length;V(s/l*100)}},le=function(){if(t.attendance&&t.attendance.length>0)if(ve()(t.dateOfAddmission).month()===ve()().month()&&ve()(t.dateOfAddmission).year()===ve()().year())B(Y);else{var e=ve()(t.dateOfAddmission),a=e.month()+1,n=e.date(),r=e.year(),o="".concat(a,"-").concat(n,"-").concat(r),c=ve()(o,"MM-DD-YYYY").businessDiff(ve()(ve()(),"MM-DD-YYYY")),l=t.attendance.map((function(e){return e.days.length})),i=null===l||void 0===l?void 0:l.reduce((function(e,t){return e+t}));B(i/c*100)}},ie=function(){var e=Object($.a)(Z.a.mark((function e(){var t,a,n,r,o,c,l,i,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),t=new Date,a=t.getFullYear(),n=t.getMonth(),r=t.getDate(),o=t.getHours(),c=t.getMinutes(),l="".concat(o,":").concat(c),i={_id:re,year:a,month:n,date:r,time:l},e.next=12,f.a.post("".concat(j.severHostedUrl,"/user/attendance"),i);case 12:(s=e.sent)&&(oe(F(s.data.updated)),Q(s.data.message),ne("success")),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),Q("Your Attendance not marked"),ne("error");case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){var e,a=t.attendance,n=a[(null===a||void 0===a?void 0:a.length)-1],r=null===n||void 0===n||null===(e=n.days)||void 0===e?void 0:e.find((function(e){return e.todayDate===ve()().date()}));r||1!==ve()().date()||(ie(),u(!0));var o=0===ve()().day()||6===ve()().day();r?u(!0):o?b(!0):u(!1),ce(),le()}(),ce(),le()})),r.a.createElement(E.a,{className:"_main"},r.a.createElement(q,{curUser:t,setAuth:a}),r.a.createElement(E.a,null,K?r.a.createElement(w,{openSnack:K,severity:ae,text:K,setOpenSnack:Q}):"",r.a.createElement(E.a,{className:o.attendance_top},p?r.a.createElement(E.a,{mt:8,maxWidth:"80%",mx:"auto",py:2,textAlign:"center"},r.a.createElement(g.a,{color:"green",variant:"h4"},"Today is Holiday")):r.a.createElement(E.a,null,r.a.createElement(g.a,{mt:8,mb:2,variant:"h4",display:"inline-block"},"Mark Today's Attendance"),r.a.createElement(E.a,null,r.a.createElement(N.a,{size:"small",variant:"contained",color:"success",onClick:function(e){return ie(e)},disabled:s||x},s?"Marked":"Mark")))),r.a.createElement(E.a,{my:5,mx:"auto",sx:{width:"80%"},display:"block"},r.a.createElement(g.a,{variant:"h6"},"This Month Attendance"),r.a.createElement(fe,{thickness:2,color:"success",variant:"determinate",value:Math.round(Y)}),r.a.createElement(g.a,{variant:"h6"},Math.round(Y),"%"))," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{mx:"auto",sx:{width:"80%"}},r.a.createElement(g.a,{variant:"h6"},"Overall Attendance"),r.a.createElement(fe,{color:"success",variant:"determinate",value:Math.round(M)}),r.a.createElement(g.a,{variant:"h6"},Math.round(M),"%"))))},ge=a(493),xe=a(16),Ce=a(508);function Oe(e){var t=e.topicChips,a=e.setTopicChips,o=e.topicErr,c=e.setTopicErr,i=e.editCourse,s=e.course;Object(n.useEffect)((function(){if(i){var e=null===s||void 0===s?void 0:s.topics.map((function(e){return e}));a(e)}}),[]);var u=Object(n.useState)(""),d=Object(l.a)(u,2),m=d[0],p=d[1],b=function(){var e=m.trim();if(e){var n={key:(new Date).getTime().toString(),label:e};a([].concat(Object(xe.a)(t),[n])),p(""),c(!1)}else p("")};return r.a.createElement("div",{width:"100%",style:{display:"flex",flexDirection:"column"}},r.a.createElement(h.a,{InputProps:{startAdornment:r.a.createElement("span",null,null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(ge.a,{sx:{backgroundColor:i?"orange":"#00800030",marginRight:1,marginTop:1},key:e.key,label:e.label,onDelete:(n=e,function(){a((function(e){return t.filter((function(e){return e.key!==n.key}))}))})});var n})))},disabled:t.length>=10,margin:"dense",name:"topicItems",label:"Topics",type:"text",variant:"outlined",value:m,onChange:function(e){return function(e){p(e.target.value),m.length>=10&&b()}(e)},onKeyPress:function(e){return function(e){" "!==e.key&&"Enter"!==e.key||b()}(e)},autoComplete:"off",color:i?"warning":"success",fullWidth:!0}),o?r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},"Please Add at least 1 Topic"):"")}var ye=function(e){var t=e.courseOutlineArr,a=e.coOutErr,n=e.editCourse,o=e.onChange;return r.a.createElement(r.a.Fragment,null,null===t||void 0===t?void 0:t.map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement(h.a,{margin:"dense",id:"".concat(t),sx:{marginTop:1},name:Object.keys(e)[0],label:"week ".concat(t+1),type:"text",variant:"outlined",value:null===e||void 0===e?void 0:e.week,onChange:function(e){return o(e,t)},autoComplete:"off",color:n?"warning":"success",fullWidth:!0,maxLength:12,inputProps:{maxLength:80}}))})),a?r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},"Please Define Outline Of All Weeks."):"")},je=a(42),ke=a(226),Se=["1 Week","2 Weeks","3 Weeks","4 Weeks"];function we(e){var t=e.curUser,a=e.editCourse,o=e.course,c=e.setSeverity,i=e.setOpenSnack,s=localStorage.getItem("uid"),u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(null),v=Object(l.a)(b,2),E=v[0],x=v[1],C=Object(n.useState)((null===o||void 0===o?void 0:o.duration)||null),O=Object(l.a)(C,2),y=O[0],k=O[1],S=Object(n.useState)([]),w=Object(l.a)(S,2),A=w[0],I=w[1],T=Object(n.useState)(null),D=Object(l.a)(T,2),z=D[0],L=D[1],P=Object(n.useState)(null),F=Object(l.a)(P,2),B=F[0],H=F[1],G=Object(n.useState)(!0),Y=Object(l.a)(G,2),V=Y[0],q=Y[1],X=Object(n.useState)(null),J=Object(l.a)(X,2),K=J[0],Q=J[1],ce=Object(n.useState)([]),le=Object(l.a)(ce,2),ie=le[0],se=le[1],ue=Object(W.b)(),de=function(){p(!0)},me=function(){p(!1)},pe=function(){x(!1)},be=Object(re.a)({initialValues:{teacher_id:s,teacherEmail:null===t||void 0===t?void 0:t.email,teacherClass:null===t||void 0===t?void 0:t.atClass,courseName:a?null===o||void 0===o?void 0:o.courseName:"",courseDesc:a?null===o||void 0===o?void 0:o.courseDesc:"",topics:null,duration:null,courseOutline:null},validationSchema:oe.b().shape({courseName:oe.c().required("Course Name is Required Field."),courseDesc:oe.c().required("Course Description is Required Field.")}),onSubmit:function(){var e=Object($.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,H(!1),0!==A.length){e.next=6;break}L(!0),e.next=32;break;case 6:if(y){e.next=10;break}Q(!0),e.next=32;break;case 10:if(ie.filter((function(e){return""!==e.week})).length===ie.length){e.next=15;break}H(!0),e.next=32;break;case 15:if(t.topics=A,t.duration=ie.length,t.courseOutline=ie,!a){e.next=26;break}return me(),e.next=22,f.a.post("".concat(j.severHostedUrl,"/course/editcourse"),t);case 22:(n=e.sent)&&(n.data.editted&&(Bt.emit("courseEditted",n.data.editted),ue(M(n.data.editted))),n.data.message?(i(n.data.message),c("success")):(i(n.data.error),c("error"))),e.next=32;break;case 26:return me(),console.log("Added",t),e.next=30,f.a.post("".concat(j.severHostedUrl,"/course/add"),t);case 30:(r=e.sent)&&(Bt.emit("newCoursesAdded",r.data.newCourse),ue(M(r.data.newCourse)),r.data.message?(i(r.data.message),c("success")):(i(r.data.error),c("error")));case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(0),console.log(e.t0),me();case 38:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t){return e.apply(this,arguments)}}()});return Object(n.useEffect)((function(){se(a?null===o||void 0===o?void 0:o.courseOutline:[])}),[]),r.a.createElement("div",null,a?r.a.createElement(R.a,{title:"Edit Course",arrow:!0},r.a.createElement(N.a,{size:"small",onClick:de,sx:{borderRadius:5}},r.a.createElement(ke.a,{size:"22px",color:"orange"}))):r.a.createElement(R.a,{title:"Add Course",arrow:!0},r.a.createElement(Ce.a,{size:"small",sx:{backgroundColor:"green","&:hover":{backgroundColor:"green"}},onClick:de},r.a.createElement(je.f,{size:"20px",color:"#fff"}))),r.a.createElement(ee.a,{open:m,onClose:me,fullWidth:!0,maxWidth:"sm"},r.a.createElement(te.a,{align:"center",backgroundColor:"white"},a?"Edit Course":"Create Course"),r.a.createElement(ae.a,null,r.a.createElement("form",{onSubmit:be.handleSubmit},r.a.createElement(h.a,{autoFocus:!0,margin:"dense",name:"courseName",label:"Course Name",type:"text",variant:"outlined",value:be.values.courseName,onChange:be.handleChange("courseName"),autoComplete:"off",fullWidth:!0,color:a?"warning":"success",inputProps:{maxLength:12}}),be.errors.courseName&&be.touched.courseName&&r.a.createElement(g.a,{variant:"body2",sx:{color:"red",marginLeft:"5px"}},be.errors.courseName),r.a.createElement(h.a,{margin:"dense",name:"courseDesc",label:"Description",type:"text",variant:"outlined",value:be.values.courseDesc,onChange:be.handleChange("courseDesc"),autoComplete:"off",fullWidth:!0,multiline:!0,color:a?"warning":"success",inputProps:{maxLength:100}}),be.errors.courseDesc&&be.touched.courseDesc&&r.a.createElement(g.a,{variant:"body2",sx:{color:"red",marginLeft:"5px"}},be.errors.courseDesc),r.a.createElement(Oe,{topicChips:A,setTopicChips:I,topicErr:z,setTopicErr:L,editCourse:a,course:o,style:{display:"flex",background:"orange"}}),r.a.createElement(N.a,{onClick:function(e){!function(e){Q(!1),H(!1),x(e.currentTarget)}(e),se([])},color:a?"warning":"success",endIcon:r.a.createElement(je.c,null)},a&&V?Se[String(y-1)]:Se[y]||"Duration"),K?r.a.createElement(g.a,{variant:"body2",sx:{color:"red",marginLeft:"5px"}},"Please Select Duration of Your Course"):r.a.createElement(r.a.Fragment,null),r.a.createElement(U.a,{open:Boolean(E),anchorEl:E,onClose:pe},Se.map((function(e,t){return r.a.createElement(_.a,{key:t,onClick:function(){return function(e){q(!1);var t=Object(xe.a)(Array(e+1)).map((function(){return{week:""}}));se(t),k(String(e)),pe()}(t)},name:"duration"},e)}))),y||a?r.a.createElement(ye,{courseOutlineArr:ie,editCourse:a,coOutErr:B,onChange:function(e,t){se((function(a){var n=Object(xe.a)(a);return n[t].week=e.target.value,n}))}}):r.a.createElement(r.a.Fragment,null))),r.a.createElement(ne.a,null,r.a.createElement(N.a,{color:a?"warning":"success",variant:"contained",onClick:be.handleSubmit},a?"Save Edit":"Create"),r.a.createElement(N.a,{color:a?"warning":"success",variant:"outlined",onClick:me},"Cancel"))))}var Ae=a(227),Ie=function(e){var t,a=e.curUser,o=e.course,c=e.setAuth,i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)(""),v=Object(l.a)(p,2),f=v[0],h=v[1],x=o||{},C=x.courseName,O=x.courseDesc,y=x.topics,j=x.duration,k=x.courseOutline,S=Object(b.g)();return r.a.createElement(E.a,{className:"_main"},r.a.createElement(q,{curUser:a,setAuth:c}),r.a.createElement(E.a,{width:"95%",maxWidth:"1100px",marginX:"auto"},u?r.a.createElement(w,{openSnack:u,severity:f,text:u,setOpenSnack:d}):"",r.a.createElement(E.a,(t={mt:5,pb:2,display:"flex",borderBottom:"1px solid #00800085",justifyContent:"space-between"},Object(m.a)(t,"pb",1),Object(m.a)(t,"px",2),Object(m.a)(t,"width","100%"),t),r.a.createElement(g.a,{variant:"h4",color:"green",sx:{textTransform:"capitalize"}},"".concat(a.fname," ").concat(a.lname,"(").concat(a.roll,")")),r.a.createElement(g.a,{variant:"body1",mt:2,color:"green"},!o&&(null===a||void 0===a?void 0:a.atClass)?r.a.createElement(we,{curUser:a,course:o,editCourse:!1,setSeverity:h,setOpenSnack:d}):(null===a||void 0===a?void 0:a.atClass)?"":r.a.createElement(N.a,{color:"success",size:"small"},"Set Your Class"))),r.a.createElement(E.a,{width:"100%",mt:3,p:3,pt:-1,color:"green"},o&&Object.entries(o).length>0?r.a.createElement(E.a,null,r.a.createElement(J.a,{container:!0},r.a.createElement(J.a,{item:!0,mt:1,sm:6,xs:12,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle1"},"Course Name:"),r.a.createElement(g.a,{ml:5,variant:"body2"},C),r.a.createElement(g.a,{color:"black",variant:"subtitle1"},"Description:"),r.a.createElement(g.a,{ml:5,variant:"body2"},O),r.a.createElement(g.a,{color:"black",variant:"subtitle1"},"Topics:"),r.a.createElement(E.a,{ml:4},null===y||void 0===y?void 0:y.map((function(e,t){return r.a.createElement(ge.a,{key:t,sx:{marginLeft:1,marginBottom:1},color:"success",size:"small",label:e.label,variant:"outlined"})}))),r.a.createElement(g.a,{color:"black",variant:"subtitle1"},"Duration:"),r.a.createElement(g.a,{ml:5,variant:"body2"},j," week / weeks")),r.a.createElement(J.a,{item:!0,mt:1,sm:6,xs:12,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle1"},"Course Outline:"),null===k||void 0===k?void 0:k.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(g.a,{color:"black",ml:5,variant:"body2"},"week ",t+1,":"),r.a.createElement(g.a,{ml:9,variant:"body1"},e.week))})))),r.a.createElement(E.a,{width:"100%",display:"flex",justifyContent:"flex-end"},r.a.createElement(we,{curUser:a,editCourse:!0,course:o,setSeverity:h,setOpenSnack:d}),r.a.createElement(R.a,{title:"Go to This Course",arrow:!0},r.a.createElement(N.a,{size:"small",sx:{borderRadius:5},onClick:function(){return S.push("/".concat(null===o||void 0===o?void 0:o._id))}},r.a.createElement(Ae.a,{size:"22px",color:"green"}))))):r.a.createElement(E.a,{pt:9,width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently No Course Added")))))},Ue=a(485),_e=a(509),Ne=a(510),Te=a(511),De=a(82);var Re=function(e){var t,a=e.curElem,o=e.curUser,c=e.setOpenSnack,i=e.setSeverity,s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(!1),b=Object(l.a)(p,2),v=b[0],h=b[1],x=o.fname,C=o.lname,O=a._id,y=a.courseDesc,k=a.courseName,S=a.courseOutline,w=a.duration,A=a.topics,I=localStorage.getItem("uid"),U=Object(W.b)(),_=function(){var e=Object($.a)(Z.a.mark((function e(t){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={student_name:"".concat(x," ").concat(C),courseName:k,course_id:O,student_id:I},e.next=4,f.a.post("".concat(j.severHostedUrl,"/course/applynow"),a);case 4:(n=e.sent)&&(n.data.message?(Bt.emit("changeInCourse",n.data.course),h(!0),U(F(n.data.student)),c(n.data.message),i("success")):(c(n.data.errors),i("error"))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{marginBottom:2}},v?"":r.a.createElement(Ue.a,{expanded:"panel1"===d,onChange:(t="panel1",function(e,a){m(!!a&&t)}),sx:{marginTop:1,"&:hover":{boxShadow:3,cursor:"pointer"}}},r.a.createElement(_e.a,{expandIcon:r.a.createElement(je.d,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(E.a,{display:"flex",justifyContent:"flex-start",alignItems:"center"},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},k[0])),r.a.createElement(g.a,{ml:3,variant:"body1",color:"green",sx:{wordWrap:"break-word",paddingX:.5}},k))),r.a.createElement(Ne.a,null,r.a.createElement(J.a,{container:!0},r.a.createElement(J.a,{item:!0,xs:12,sm:6,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Course Name:"),r.a.createElement(g.a,{color:"green",ml:5,variant:"body2"},k),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Description:"),r.a.createElement(g.a,{color:"green",ml:5,variant:"body2"},y),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Topics:"),r.a.createElement(E.a,{ml:4},null===A||void 0===A?void 0:A.map((function(e,t){return r.a.createElement(ge.a,{key:t,sx:{marginLeft:1,marginBottom:1},color:"success",size:"small",label:e.label,variant:"outlined"})}))),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Duration:"),r.a.createElement(g.a,{ml:5,variant:"body2"},w," week / weeks")),r.a.createElement(J.a,{item:!0,xs:12,sm:6,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Course Outline:"),null===S||void 0===S?void 0:S.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(g.a,{color:"black",ml:5,variant:"body1"},"week ",t+1,":"),r.a.createElement(g.a,{color:"green",ml:9,variant:"body2"},e.week))}))))),r.a.createElement(Te.a,null,r.a.createElement(R.a,{title:"Enroll Now",arrow:!0},r.a.createElement(N.a,{variant:"contained",color:"success",onClick:function(e){return _(e)}},r.a.createElement(De.d,{color:"green",size:"22px"}))))))},ze=a(480),Le=a(512);function Pe(e){var t=e.children,a=e.value,n=e.index;return r.a.createElement(E.a,{width:"100%",sx:{marginX:"auto",padding:"5px"}},a===n&&r.a.createElement(r.a.Fragment,null," ",t," "))}var We=function(e){var t=e.tab1Label,a=e.tab2Label,o=e.tab3Label,c=e.tab4Label,i=e.panel1,s=e.panel2,u=e.panel3,d=e.panel4,m=Object(n.useState)(0),p=Object(l.a)(m,2),b=p[0],v=p[1];return r.a.createElement(E.a,null,r.a.createElement(E.a,{sx:{borderBottom:1,borderColor:"divider"}},r.a.createElement(ze.a,{value:b,onChange:function(e,t){v(t)},textColor:"inherit",scrollButtons:"auto",variant:"scrollable",TabIndicatorProps:{sx:{backgroundColor:"green",height:"5px"}}},r.a.createElement(Le.a,{label:t}),r.a.createElement(Le.a,{label:a}),o?r.a.createElement(Le.a,{label:o}):"",c?r.a.createElement(Le.a,{label:c}):"")),r.a.createElement(Pe,{value:b,index:0},i),r.a.createElement(Pe,{value:b,index:1},s),u?r.a.createElement(Pe,{value:b,index:2},u):"",d?r.a.createElement(Pe,{value:b,index:3},d):"")},Fe=a(83),Me=function(e){var t,a=e.curCor,o=(e.ind,Object(n.useState)(!1)),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)({}),d=Object(l.a)(u,2),m=d[0],p=d[1],v=Object(n.useState)([]),h=Object(l.a)(v,2),x=h[0],C=h[1],O=Object(b.g)(),y=m.courseName,k=m.courseDesc,S=m.topics,w=m.duration,A=m.courseOutline,I=function(){var e=Object($.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=null===x||void 0===x?void 0:x.find((function(e){return e._id===a.id})))){e.next=6;break}p(t),e.next=11;break;case 6:return e.next=8,f.a.post("".concat(j.severHostedUrl,"/course/getcourse"),{id:a.id});case 8:n=e.sent,p(n.data.DBcourse),C([].concat(Object(xe.a)(x),[n.data.DBcourse]));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{marginBottom:2,width:"100%"}},r.a.createElement(Ue.a,{width:"100%",expanded:"panel1"===i,onClick:I,onChange:(t="panel1",function(e,a){s(!!a&&t)}),sx:{marginTop:1,"&:hover":{boxShadow:3,cursor:"pointer"}}},r.a.createElement(_e.a,{expandIcon:r.a.createElement(je.d,{onClick:I}),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(E.a,{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},r.a.createElement(E.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",flexGrow:1},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},null===a||void 0===a?void 0:a.name[0])),r.a.createElement(g.a,{ml:3,variant:"body1",color:"green",sx:{wordWrap:"break-word",paddingX:.5}},null===a||void 0===a?void 0:a.name)),r.a.createElement(R.a,{title:"Preview"},r.a.createElement(N.a,{color:"success",onClick:function(e){return O.push("/".concat(null===a||void 0===a?void 0:a.id))}}," ",r.a.createElement(Fe.a,{color:"black",size:"22px"}))))),r.a.createElement(Ne.a,null,r.a.createElement(J.a,{container:!0,display:"flex"},r.a.createElement(J.a,{item:!0,xs:12,sm:6,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Course Name:"),r.a.createElement(g.a,{color:"green",ml:5,variant:"body2"},y),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Description:"),r.a.createElement(g.a,{color:"green",ml:5,variant:"body2"},k),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Topics:"),r.a.createElement(E.a,{ml:4},null===S||void 0===S?void 0:S.map((function(e,t){return r.a.createElement(ge.a,{key:t,sx:{marginLeft:1,marginBottom:1},color:"success",size:"small",label:e.label,variant:"outlined"})}))),r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Duration:"),r.a.createElement(g.a,{ml:5,variant:"body2"},w," week / weeks")),r.a.createElement(J.a,{item:!0,xs:12,sm:6,sx:{wordWrap:"break-word"}},r.a.createElement(g.a,{color:"black",variant:"subtitle2"},"Course Outline:"),null===A||void 0===A?void 0:A.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(g.a,{color:"black",ml:5,variant:"body1"},"week ",t+1,":"),r.a.createElement(g.a,{color:"green",ml:9,variant:"body2"},e.week))})))))))},Be=function(e){var t,a=e.curUser,o=e.courses,c=e.setAuth,i=Object(n.useState)(!0),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),b=p[0],v=p[1],h=Object(n.useState)(""),x=Object(l.a)(h,2),C=x[0],O=x[1],y=function(){var e=Object($.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===a||void 0===a||null===(t=a.courses)||void 0===t?void 0:t.filter((function(e){return!0===e.removedByTeacher})))){e.next=6;break}return e.next=5,f.a.post("".concat(j.severHostedUrl,"/course/delcoursefromstudent"),{id:null===a||void 0===a?void 0:a._id});case 5:setTimeout((function(){d(!1)}),6e4);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){y()}),[]),r.a.createElement(E.a,{className:"_main"},r.a.createElement(q,{curUser:a,setAuth:c}),r.a.createElement(E.a,{width:"100%"},b?r.a.createElement(w,{openSnack:b,severity:C,text:b,setOpenSnack:v}):"",r.a.createElement(E.a,{mx:"auto",mt:2,maxWidth:"800px",display:"flex",flexDirection:"column",justifyContent:"center"},r.a.createElement(We,{tab1Label:"Available Courses",panel1:r.a.createElement(E.a,{width:"100%",mt:4.2},r.a.createElement(E.a,{mb:2,display:"flex",justifyContent:"space-between",pb:1,px:2,borderBottom:"1.5px solid #009c0052",width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},"Available Courses")),(null===o||void 0===o?void 0:o.length)>0&&(null===a||void 0===a?void 0:a.atClass)?null===o||void 0===o?void 0:o.map((function(e,t){return r.a.createElement(Re,{setOpenSnack:v,setSeverity:O,key:t,curElem:e,curUser:a})})):(null===a||void 0===a?void 0:a.atClass)?r.a.createElement(E.a,{pt:9,width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently No Course Available...")):r.a.createElement(E.a,{pt:9,width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Please Set Your class to get Available Courses.."))),tab2Label:"Enrolled Courses",panel2:r.a.createElement(E.a,{width:"100%",mt:3},r.a.createElement(E.a,{mb:2,display:"flex",justifyContent:"space-between",pb:1,px:2,borderBottom:"1.5px solid #009c0052",width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},"Enrolled Courses")),r.a.createElement(E.a,null,(null===a||void 0===a||null===(t=a.courses)||void 0===t?void 0:t.length)>0?null===a||void 0===a?void 0:a.courses.map((function(e,t){return e.removedByTeacher&&u?r.a.createElement(E.a,{key:t,width:"100%",textAlign:"center",mt:1,py:2,sx:{borderRadius:1,backgroundColor:"#ff0000d1","&:hover":{boxShadow:3,cursor:"pointer"}}},r.a.createElement(g.a,{variant:"body1",color:"white"},'You Were Removed from "',e.name,'"')):r.a.createElement(Me,{curCor:e,key:t,ind:t})})):r.a.createElement(E.a,{pt:9,width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently Not Enrolled In Any Course..."))))}))))},He=function(e){var t=e.curUser,a=e.setAuth,n=Object(W.c)((function(e){return e.usersReducer.course})),o=Object(W.c)((function(e){return e.usersReducer.studentCourse}));return"teacher"===t.roll?r.a.createElement(Ie,{curUser:t,course:n,setAuth:a}):r.a.createElement(Be,{curUser:t,courses:o,setAuth:a})},Ge=function(e){var t=e.userName,a=e.autoFocus,n=e.placeholder,o=e.value,c=e.setValue,l=e.name,i=e.color,s=e.submitFunc,u=e.type;return r.a.createElement(E.a,{sx:{width:"100%",borderRadius:"7.5px",marginTop:1,marginBottom:2,justifySelf:"flex-end",padding:"1rem 1.5rem",border:"1.8px solid #00000033"}},r.a.createElement(E.a,{width:"100%"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(E.a,{width:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},t)),r.a.createElement(E.a,{flexGrow:1},r.a.createElement(h.a,{autoFocus:a,name:l,type:u,placeholder:n,value:o,onChange:function(e){return c(e.target.value)},autoComplete:"off",fullWidth:!0,multiline:!0,color:i,InputProps:{endAdornment:r.a.createElement(Fe.b,{onClick:function(e){return s(e)},size:"26px",color:"green",style:{margin:"auto 1 0 0",cursor:"pointer"}})}})))))},Ye=a(228),Ve=a.n(Ye),qe=function(e){var t=e.color,a=e.timeColor,n=e.nameFirestLetter,o=e.name,c=e.time,l=e.message;return r.a.createElement(E.a,{sx:{width:"100%",borderRadius:"7.5px",marginTop:3,padding:"1rem 1.5rem",border:"1.8px solid #00000033"}},r.a.createElement(E.a,{width:"100%"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(E.a,{width:"65px"},r.a.createElement(X.a,{sx:{bgcolor:t,textTransform:"capitalize"}},n)),r.a.createElement(E.a,{flexGrow:1},r.a.createElement(g.a,{variant:"subtitle1",color:t,sx:{textTransform:"capitalize"}},r.a.createElement("b",null,o)),r.a.createElement(g.a,{variant:"body2",color:a}," ",c)))),r.a.createElement(E.a,{width:"100%",mt:2,sx:{wordWrap:"break-word",paddingLeft:5}},r.a.createElement(g.a,{variant:"subtitle2"},l)))},Xe=a(59),Je=a.n(Xe),Ke=function(e){var t,a=e.curUser,o=e.currentCourse,c=Object(n.useState)(""),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),p=Object(l.a)(m,2),b=p[0],v=p[1],h=Object(n.useState)(""),x=Object(l.a)(h,2),C=x[0],O=x[1],y=Object(n.useState)(""),k=Object(l.a)(y,2),S=k[0],A=k[1],I=Object(W.b)();Object(n.useEffect)((function(){if(o&&a){var e,t=null===o||void 0===o||null===(e=o.students)||void 0===e?void 0:e.find((function(e){return e.id===(null===a||void 0===a?void 0:a._id)}));(null===t||void 0===t?void 0:t.muted)?v(!0):v(!1)}}));var U=a||{},_=U._id,N=U.fname,T=U.lname,D=function(){var e=Object($.a)(Z.a.mark((function e(t){var a,n,r,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=s.trim())){e.next=12;break}return n="".concat(N," ").concat(T),r=Je()().format("hh:mm A"),c={id:_,name:n,time:r,message:a,courseID:null===o||void 0===o?void 0:o._id},e.next=8,f.a.post("".concat(j.severHostedUrl,"/course/sendmessage"),c);case 8:(l=e.sent)&&(u(""),l.data.message?(Bt.emit("msgSentInStream",l.data.course),I(B(l.data.course)),O(l.data.message),A("success")):(O(l.data.error),A("error"))),e.next=14;break;case 12:O("Please write something"),A("error");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(E.a,{maxWidth:"1100px",display:"flex",flexDirection:"column",justifyContent:"center",sx:{marginX:"auto"}},C?r.a.createElement(w,{openSnack:C,severity:S,text:C,setOpenSnack:O}):"",r.a.createElement(E.a,{sx:{width:"100%",height:"240px",borderRadius:"10px",marginTop:3}},r.a.createElement("img",{src:Ve.a,width:"100%",height:"100%",style:{borderRadius:"10px"},alt:"BackGround Image"})),null===o||void 0===o||null===(t=o.chat)||void 0===t?void 0:t.map((function(e,t){return r.a.createElement(qe,{color:(null===a||void 0===a?void 0:a._id)===(null===e||void 0===e?void 0:e.id)?"green":"#ba000d",timeColor:(null===a||void 0===a?void 0:a._id)===(null===e||void 0===e?void 0:e.id)?"#2e7d32de":"#ba000db8",curUser:a,key:t,nameFirestLetter:e.name[0],name:(null===a||void 0===a?void 0:a._id)===(null===e||void 0===e?void 0:e.id)?"Me":e.name,time:e.time,message:e.message})})),b?r.a.createElement(E.a,{mt:3,border:"1px solid red",borderRadius:2,width:"100%",py:3,textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"red"},"You Can't send Message Because You're Muted...")):r.a.createElement(Ge,{name:"message",autoFocus:!0,value:s,setValue:u,placeholder:"Add comment to All Students",color:"success",submitFunc:D,userName:null===a||void 0===a?void 0:a.fname[0]})):r.a.createElement(d,null)},Qe=function(e){var t=e.currentCourse,a=e.curUser,o=Object(n.useState)(null),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),h=v[0],x=v[1],C=Object(n.useState)(""),O=Object(l.a)(C,2),y=O[0],k=O[1],S=Object(n.useState)(""),A=Object(l.a)(S,2),I=A[0],U=A[1],_=function(){p(!m)},T=a||{},D=T._id,R=T.fname,z=T.lname,L=function(){var e=Object($.a)(Z.a.mark((function e(a){var n,r,o,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=h.trim())){e.next=12;break}return r="".concat(R," ").concat(z),o=Je()().format("hh:mm A"),c={id:D,name:r,time:o,message:n,courseID:null===t||void 0===t?void 0:t._id},e.next=8,f.a.post("".concat(j.severHostedUrl,"/course/announcement"),c);case 8:(l=e.sent)&&(x(""),_(),l.data.message?(k(l.data.message),U("success"),Bt.emit("changeInCourse",l.data.course),s(l.data.course.announcement)):(k(l.data.error),U("error"))),e.next=14;break;case 12:k("Write something"),U("error");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s(null===t||void 0===t?void 0:t.announcement)}),[t]),r.a.createElement(E.a,{maxWidth:"1100px",minHeight:"77vh",display:"flex",flexDirection:"column",sx:{marginX:"auto"}},y?r.a.createElement(w,{openSnack:y,severity:I,text:y,setOpenSnack:k}):"","teacher"===(null===a||void 0===a?void 0:a.roll)?r.a.createElement("div",null,m?r.a.createElement(Ge,{name:"announce",autoFocus:!0,value:h,setValue:x,type:"text",placeholder:"Write Announcement",color:"success",submitFunc:L,userName:null===a||void 0===a?void 0:a.fname[0]}):"",r.a.createElement(E.a,{onClick:_,sx:{width:"100%","&:hover":{color:"green",cursor:"pointer"},borderRadius:"12px",backgroundColor:"#00710012",padding:"1rem 1.5rem",boxShadow:4}},r.a.createElement(E.a,{width:"100%"},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{width:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},"r")),r.a.createElement(E.a,{flexGrow:1},r.a.createElement(g.a,{color:"#0000009c",sx:{fontSize:"14px","&:hover":{color:"green",cursor:"pointer",textDecoration:"underline"}}},"Announce Something to Your Students")),r.a.createElement(E.a,null,r.a.createElement(N.a,{sx:{borderRadius:5},size:"small"},r.a.createElement(De.a,{size:"23px"}))))))):r.a.createElement(E.a,{borderBottom:"1px solid #00800059",display:"flex",justifyContent:"flex-start",pb:2,px:2,width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},"Announcements")),null===i||void 0===i?void 0:i.map((function(e,t){return r.a.createElement(qe,{color:"green",timeColor:"#2e7d32de",curUser:a,key:t,nameFirestLetter:e.name[0],name:(null===a||void 0===a?void 0:a._id)===(null===e||void 0===e?void 0:e.id)?"Me":e.name,time:e.time,message:e.message})})))},Ze=function(e){var t,a,o=e.currentCourse,c=e.curUser,i=Object(n.useState)(null===o||void 0===o?void 0:o.students),s=Object(l.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)(null),b=Object(l.a)(p,2),v=b[0],h=b[1],x=Object(n.useState)(""),C=Object(l.a)(x,2),O=C[0],k=C[1],S=Object(n.useState)(""),A=Object(l.a)(S,2),I=A[0],T=A[1],D=Object(n.useState)(""),R=Object(l.a)(D,2),z=R[0],L=R[1],P=Object(n.useState)(""),W=Object(l.a)(P,2),F=W[0],M=W[1],B=Object(n.useState)(""),H=Object(l.a)(B,2),G=H[0],Y=H[1],V=Boolean(v),q=c||{},J=q._id,K=q.fname,Q=q.lname,ee=function(e){T(""),k(""),L(""),h(e.currentTarget)},te=function(){var e=Object($.a)(Z.a.mark((function e(t){var a,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={studentID:t,courseID:null===o||void 0===o?void 0:o._id},e.next=4,f.a.post("".concat(j.severHostedUrl,"/course/delspecificstudent"),a);case 4:(n=e.sent)&&(n.data.message?(Bt.emit("changeInCourse",n.data.course),d(n.data.course.students),M(n.data.message),Y("success")):(M(n.data.error),Y("error"))),ne(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),ne();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object($.a)(Z.a.mark((function e(t){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(),e.next=4,f.a.post("".concat(j.severHostedUrl,"/course/mutestudent"),{courseID:null===o||void 0===o?void 0:o._id,studentID:t});case 4:(a=e.sent)&&(Bt.emit("changeInCourse",a.data.course),d(a.data.course.students),a.data.message?(M(a.data.message),Y("success")):(M(a.data.error),Y("error"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),ne();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){h(null)},re=function(){var e=Object($.a)(Z.a.mark((function e(t){var a,n,r,o,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=O.trim())){e.next=12;break}return n="".concat(K," ").concat(Q),r=Je()().format("hh:mm:ss A"),o={senderID:J,senderName:n,time:r,message:a,recieverID:I,recieverName:z},e.next=8,f.a.post("".concat(j.severHostedUrl,"/user/sendmsg"),o);case 8:(c=e.sent)&&(c.data.message?(Bt.emit("changeInConversation",c.data.conversation),M(c.data.message),Y("success")):(M(c.data.error),Y("error")),k(""),T(""),L("")),e.next=14;break;case 12:M("write something"),Y("error");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(E.a,null,r.a.createElement(E.a,{sx:{maxWidth:"760px",margin:"0 auto"}},F?r.a.createElement(w,{openSnack:F,severity:G,text:F,setOpenSnack:M}):"",r.a.createElement(E.a,{display:"flex",justifyContent:"space-between",pb:1,px:2,borderBottom:"1.5px solid #009c0052",width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},"Students"),r.a.createElement(g.a,{variant:"body1",mt:3,color:"green"},(null===o||void 0===o||null===(t=o.students)||void 0===t?void 0:t.length)>0?u.length:"No"," students")),(null===o||void 0===o||null===(a=o.students)||void 0===a?void 0:a.length)>0?u.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(E.a,Object(m.a)({p:"10px 20px",mt:1,width:"85%",display:"flex",justifyContent:"space-between",sx:{borderRadius:"10px","&:hover":{backgroundColor:"#009c0026",boxShadow:3,cursor:"pointer"}}},"width","100%"),r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sizes:"50px",sx:{bgcolor:"green",textTransform:"capitalize"}},e.name[0])),r.a.createElement(E.a,null,r.a.createElement(g.a,{sx:{fontSize:"16px"}},e.name))),r.a.createElement(N.a,{id:"basic-button",sx:{color:"black",borderRadius:5},"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":V?"true":void 0,onClick:ee,size:"small"},r.a.createElement(y.d,{size:"23px",style:{margin:"auto 0px"}})),r.a.createElement(U.a,{id:"basic-menu",anchorEl:v,open:V,onClose:ne,MenuListProps:{"aria-labelledby":"basic-button"}},r.a.createElement(_.a,{onClick:function(){T(e.id),L(e.name),ne()}},"Send Message to ",null===e||void 0===e?void 0:e.name),r.a.createElement(_.a,{onClick:function(){return te(e.id)}},"Remove"),r.a.createElement(_.a,{onClick:function(){return ae(e.id)}},e.muted?"Unmute":"Mute"))),I?r.a.createElement(Ge,{name:"message",autoFocus:!0,value:O,setValue:k,type:"text",placeholder:"Write Message for this student",color:"success",submitFunc:re,userName:null===c||void 0===c?void 0:c.fname[0]}):"")})):r.a.createElement(E.a,{pt:9,width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently No Students..."))))},$e=function(e){var t=e.currentCourse,a=e.btnTitle,o=e.tooltipTitle,c=e.curUser,i=e.btnIcon,s=e.dialogTitle,u=e.actionTitle,d=e.isTeacher,m=e.btnStartIcon,p=e.btnColor,b=e.btnVariant,v=e.currentAssignment,x=e.input2label,C=e.setOpenSnack,O=e.setSeverity,y=e.setAllAssignments,k=Object(n.useState)(!1),S=Object(l.a)(k,2),w=S[0],A=S[1],I=Object(n.useState)(null),U=Object(l.a)(I,2),_=U[0],T=U[1],D=function(){A(!1)},z=Object(W.b)(),L=Object(re.a)({initialValues:{title:d?"":null===v||void 0===v?void 0:v.title,desc:""},validationSchema:oe.b().shape({title:oe.c().required("Title is Required Field...")}),onSubmit:function(){var e=Object($.a)(Z.a.mark((function e(a){var n,r,o,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_||a.desc){e.next=6;break}C("You cannot leave both files and description blank at the same time"),O("error"),e.next=27;break;case 6:if(n=new FormData,!a.desc&&_?n.append("myFile",_):!_&&a.desc?n.append("desc",a.desc):(n.append("desc",a.desc),n.append("myFile",_)),r={headers:{"content-type":"multipart/form-data"}},!d){e.next=18;break}return n.append("title",a.title),n.append("courseID",null===t||void 0===t?void 0:t._id),e.next=14,f.a.post("".concat(j.severHostedUrl,"/assignment/add"),n,r);case 14:(o=e.sent)&&(D(),T(null),a={},o.data.message?(y(o.data.allAssignment),console.log("res.data.assignment",o.data.allAssignment),Bt.emit("assignmentAdd",o.data.allAssignment),z(H(o.data.allAssignment)),C(o.data.message),O("success")):(C(o.data.error),O("error"))),e.next=27;break;case 18:return n.append("assignmentID",null===v||void 0===v?void 0:v._id),n.append("id","".concat(null===c||void 0===c?void 0:c._id)),n.append("name","".concat(null===c||void 0===c?void 0:c.fname," ").concat(null===c||void 0===c?void 0:c.lname)),n.append("time",Je()().format("hh:mm:ss A")),D(),e.next=25,f.a.post("".concat(j.severHostedUrl,"/assignment/submit"),n,r);case 25:(l=e.sent)&&(T(null),Bt.emit("changeInAssignment",l.data.assignment),l.data.message?(C(l.data.message),O("success")):(C(l.data.error),O("error")));case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0),D();case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}()});return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{title:o,arrow:!0},r.a.createElement(N.a,{startIcon:m,onClick:function(){A(!0)},color:p,sx:{marginTop:d?3:0,borderRadius:5},variant:b},a||i)),r.a.createElement(ee.a,{open:w,onClose:D,fullWidth:!0,maxWidth:"sm"},r.a.createElement(te.a,null,s),r.a.createElement(ae.a,null,r.a.createElement("form",{method:"POST"},r.a.createElement(h.a,{autoFocus:!0,margin:"dense",name:"title",label:"Title",type:"text",variant:"filled",value:d?L.values.title:null===v||void 0===v?void 0:v.title,onChange:L.handleChange("title"),autoComplete:"off",disabled:!d,fullWidth:!0,color:"success",inputProps:{maxLength:32,required:!0}}),L.errors.title&&L.touched.title&&r.a.createElement("p",{style:{color:"red",marginLeft:"5px"}},L.errors.title),r.a.createElement(h.a,{margin:"dense",name:"desc",label:x,type:"text",variant:"filled",value:L.values.desc,onChange:L.handleChange("desc"),autoComplete:"off",fullWidth:!0,color:"success",multiline:!0,minRows:2,inputProps:{maxLength:500}}),r.a.createElement(E.a,{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center"},r.a.createElement(E.a,{border:"1px solid rgba(0, 0, 0, 0.09)",px:"14px",mt:1,py:"7px",flexGrow:1},r.a.createElement(g.a,{variant:"subtitle1"},_?_.name:"No File Selected")),r.a.createElement(R.a,{title:"Attech File",arrow:!0},r.a.createElement(N.a,{component:"label",sx:{borderRadius:5}},r.a.createElement(De.b,{size:"20px",color:"white"}),r.a.createElement("input",{type:"file",onChange:function(e){return function(e){var t=e.target.files[0];t&&(t.size/1024/1024>10?(C("file Size is too long"),O("error")):T(t))}(e)},accept:".zip,.txt,.psd,.pptx,.pptx,.png,.jpeg,.jpg,.pdf,.docx,.doc",hidden:!0})))))),r.a.createElement(ne.a,null,r.a.createElement(N.a,{onClick:L.handleSubmit,color:"success",variant:"contained"},u),r.a.createElement(N.a,{onClick:D,color:"success",variant:"outlined"},"cancel"))))},et=function(e){var t,a=e.curUser,o=e.isTeacher,c=e.assignment,i=e.setCurrentAssignmentID,s=e.setChecked,u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(null),v=Object(l.a)(b,2),f=v[0],h=v[1],x=Boolean(f),C=function(e){h(null)};return r.a.createElement("div",null,r.a.createElement(Ue.a,{expanded:"panel1"===m,onChange:(t="panel1",function(e,a){p(!!a&&t)}),sx:{marginTop:1,"&:hover":{boxShadow:3,cursor:"pointer"}}},r.a.createElement(_e.a,{"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},r.a.createElement(je.b,{size:"20px",color:"white"}))),r.a.createElement(E.a,null,r.a.createElement(g.a,{sx:{fontSize:"16px"}},null===c||void 0===c?void 0:c.title))),r.a.createElement(E.a,{display:"flex",alignItems:"center"},(null===c||void 0===c?void 0:c.file)?r.a.createElement(R.a,{arrow:!0,title:"View file"},r.a.createElement(N.a,{sx:{color:"black",borderRadius:5},size:"small",onClick:function(e){return function(e){e.stopPropagation()}(e)},target:"_blanck",href:null===c||void 0===c?void 0:c.file},r.a.createElement(Fe.a,{size:"23px",style:{margin:"auto 0px"}}))):"",o?r.a.createElement(E.a,null,r.a.createElement(N.a,{sx:{color:"green",borderRadius:5},size:"small",id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:function(e){e.stopPropagation(),h(e.currentTarget)}},r.a.createElement(je.e,{size:"23px",style:{margin:"auto 0px"}})),r.a.createElement(U.a,{id:"basic-menu",anchorEl:f,open:x,onClose:C,MenuListProps:{"aria-labelledby":"basic-button"}},r.a.createElement(_.a,{onClick:function(e){e.stopPropagation(),i(null===c||void 0===c?void 0:c._id),s(!1),C()}},"Submited"),r.a.createElement(_.a,{onClick:function(e){e.stopPropagation(),i(null===c||void 0===c?void 0:c._id),s(!0),C()}},"Checked"))):r.a.createElement($e,{btnIcon:r.a.createElement(je.f,{size:"23px",style:{margin:"auto 0px"}}),btnVariant:"text",btnColor:"success",tooltipTitle:"Submit Assignment",input2label:"Answers",currentAssignment:c,dialogTitle:"Submit Assignment",actionTitle:"submit",curUser:a,isTeacher:o}))),r.a.createElement(Ne.a,null,r.a.createElement(g.a,null," ",(null===c||void 0===c?void 0:c.description)?c.description:"This Assignment have no desccription"))))},tt=a(95),at=function(e){var t=e.submitted;return r.a.createElement(E.a,{width:"100%",mx:1,mb:1,sx:{backgroundColor:"#fff",boxShadow:2,"&:hover":{cursor:"pointer",boxShadow:4,backgroundColor:"#0080000c"},borderRadius:"12px",padding:"1rem 0px 1rem 1.5rem"}},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{width:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},null===t||void 0===t?void 0:t.name[0])),r.a.createElement(E.a,{flexGrow:1},r.a.createElement(g.a,{variant:"h6",color:"#0000009c",sx:{color:"green",cursor:"pointer"}},null===t||void 0===t?void 0:t.name)),r.a.createElement(g.a,{mr:2,variant:"body1"},Math.round(null===t||void 0===t?void 0:t.marks)," Marks")))},nt=a(117),rt=function(e){var t=e.submitted,a=e.assignmentID,o=e.checked,c=e.setOpenSnack,i=e.setSeverity,s=Object(W.c)((function(e){return e.usersReducer.curUser})),u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],b=Object(n.useState)(!1),v=Object(l.a)(b,2),h=v[0],x=v[1],C=Object(n.useState)(Number(0)),O=Object(l.a)(C,2),y=O[0],k=O[1],S=Object(n.useState)(!1),w=Object(l.a)(S,2),A=w[0],I=w[1];console.log("checkedInSubmittedAccordion",o);var U,_=function(){var e=Object($.a)(Z.a.mark((function e(n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y&&y>=0&&y<=100)){e.next=13;break}return e.prev=1,e.next=4,f.a.post("".concat(j.severHostedUrl,"/assignment/givemarks"),{studentID:null===t||void 0===t?void 0:t.id,assignmentID:a,marks:y});case 4:(r=e.sent)&&(Bt.emit("changeInAssignment",r.data.assignment),x(!0),r.data.message?(c(r.data.message),i("success")):(c(r.data.error),i("error"))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=15;break;case 13:c("Failed to Giving Marks..."),i("error");case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(E.a,null,h?"":r.a.createElement(E.a,null,r.a.createElement(Ue.a,{expanded:"panel1"===A,onChange:(U="panel1",function(e,t){I(!!t&&U)}),sx:{backgroundColor:"#00800012",borderRadius:1,marginTop:1,"&:hover":{boxShadow:3,cursor:"pointer"}}},r.a.createElement(_e.a,{"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},null===t||void 0===t?void 0:t.name[0])),r.a.createElement(E.a,null,r.a.createElement(g.a,{sx:{fontSize:"16px"}},null===t||void 0===t?void 0:t.name))),r.a.createElement(E.a,{display:"flex",alignItems:"center"},(null===t||void 0===t?void 0:t.file)?r.a.createElement(R.a,{arrow:!0,title:"View file"},r.a.createElement(N.a,{sx:{color:"black",borderRadius:5},size:"small",onClick:function(e){return function(e){e.stopPropagation()}(e)},target:"_blanck",href:null===t||void 0===t?void 0:t.file},r.a.createElement(Fe.a,{size:"23px",style:{margin:"auto 0px"}}))):"",r.a.createElement(E.a,null,r.a.createElement(R.a,{title:"Give Marks"},r.a.createElement(N.a,{sx:{color:"green",borderRadius:5},size:"small",id:"basic-button",onClick:function(e){e.stopPropagation(),p(!m)}},r.a.createElement(nt.c,{size:"23px",style:{margin:"auto 0px"}})))))),r.a.createElement(Ne.a,null,r.a.createElement(g.a,null,null===t||void 0===t?void 0:t.desc))),r.a.createElement(E.a,{mx:1,onClick:function(e){e.stopPropagation()}},m?r.a.createElement(Ge,{name:"marks",autoFocus:!0,value:y,setValue:k,type:"number",placeholder:"Give Marks Out of 100",color:"success",submitFunc:_,userName:null===s||void 0===s?void 0:s.fname[0]}):"")))},ot=function(e){var t,a,o,c=e.currentAssignmentID,i=e.checked,s=Object(W.c)((function(e){return e.usersReducer.currentAssignment})),u=Object(n.useState)(s),d=Object(l.a)(u,2),m=d[0],p=d[1],v=Object(n.useState)(""),h=Object(l.a)(v,2),x=h[0],C=h[1],O=Object(n.useState)(""),y=Object(l.a)(O,2),k=y[0],S=y[1],A=Object(W.b)(),I=Object(b.g)();return Object(n.useEffect)((function(){Bt.on("CHANGE_IN_ASSIGNMENT",(function(e){(null===s||void 0===s?void 0:s._id)===e._id&&(p(e),A(G(e)))}))})),Object(n.useEffect)(Object($.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(j.severHostedUrl,"/assignment/submitted/").concat(c));case 2:(t=e.sent)&&(A(G(t.data.assignment)),p(t.data.assignment));case 4:case"end":return e.stop()}}),e)}))),[]),r.a.createElement(E.a,null,x?r.a.createElement(w,{openSnack:x,severity:k,text:x,setOpenSnack:C}):"",r.a.createElement(E.a,{display:"flex",justifyContent:"flex-end",px:2,width:"100%"},r.a.createElement(R.a,{title:"Go to checked Assignments",arrow:!0},r.a.createElement(N.a,{onClick:function(){return I.push("/coursedetails")},startIcon:r.a.createElement(tt.a,{color:"inherit",size:"22px"}),color:"success",sx:{marginTop:3,borderRadius:5},variant:"contained"},"Back"))),r.a.createElement(E.a,{display:"flex",borderBottom:"1px solid #00800085",justifyContent:"space-between",pb:1,px:2,width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},i?"Checked ":"Submitted "," Students"),r.a.createElement(g.a,{variant:"body1",mt:2,color:"green"},"(",null===m||void 0===m?void 0:m.title,")")),i?null===m||void 0===m||null===(t=m.submitted)||void 0===t?void 0:t.map((function(e,t){return e.marks?r.a.createElement(at,{key:t,submitted:e}):""})):(null===m||void 0===m||null===(a=m.submitted)||void 0===a?void 0:a.length)>0?null===m||void 0===m||null===(o=m.submitted)||void 0===o?void 0:o.map((function(e,t){return e.marks?"":r.a.createElement(rt,{checked:i,key:t,submitted:e,assignmentID:null===m||void 0===m?void 0:m._id,setOpenSnack:C,setSeverity:S})})):r.a.createElement(E.a,{pt:9,borderTop:"1px solid green",width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently No Student Submit this Assignment")))},ct=function(e){var t=e.currentCourseID,a=Object(W.c)((function(e){return e.usersReducer.curUser})),o=Object(n.useState)(null),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(b.g)(),d=Object(W.b)();return Object(n.useEffect)(Object($.a)(Z.a.mark((function e(){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(j.severHostedUrl,"/assignment/studentallchecked"),{courseID:t,studentID:null===a||void 0===a?void 0:a._id});case 3:(n=e.sent)&&(s(n.data.checked),d({type:"CHECKED_ASSIGNMENTS",payload:n.data.checked})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(E.a,{display:"flex",justifyContent:"flex-end",px:2,width:"100%"},r.a.createElement(R.a,{title:"Back to Course Details",arrow:!0},r.a.createElement(N.a,{onClick:function(){return u.push("/coursedetails")},startIcon:r.a.createElement(tt.a,{color:"inherit",size:"22px"}),color:"success",sx:{marginTop:3,borderRadius:5},variant:"contained"},"Back"))),r.a.createElement(E.a,{display:"flex",borderBottom:"1px solid #00800085",justifyContent:"space-between",pb:1,px:2,width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},"All Checked Assignments"),r.a.createElement(g.a,{variant:"body1",mt:2,color:"green"},"(Assignment Name)"))),(null===i||void 0===i?void 0:i.length)>0?null===i||void 0===i?void 0:i.map((function(e,t){var n=e.submitted.find((function(e){return e.id===a._id})),o=null===n||void 0===n?void 0:n.marks;return r.a.createElement(E.a,{key:t,width:"100%",mx:1,mb:1,sx:{backgroundColor:"#fff",boxShadow:2,"&:hover":{cursor:"pointer",boxShadow:4,backgroundColor:"#0080000c"},borderRadius:"12px",padding:"1rem 0px 1rem 1.5rem"}},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{width:"65px"},r.a.createElement(X.a,{sx:{bgcolor:"green",textTransform:"capitalize"}},null===e||void 0===e?void 0:e.title[0])),r.a.createElement(E.a,{flexGrow:1},r.a.createElement(g.a,{variant:"h6",color:"#0000009c",sx:{color:"green",cursor:"pointer"}},null===e||void 0===e?void 0:e.title)),r.a.createElement(g.a,{mr:2,variant:"body1"},o," Marks")))})):r.a.createElement(E.a,{pt:9,borderTop:"1px solid green",width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"No Assignment Checked")))},lt=function(e){var t=e.curUser,a=e.isTeacher,o=e.currentCourse,c=Object(W.c)((function(e){return e.usersReducer.allAssignments})),i=Object(n.useState)(c),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),b=p[0],v=p[1],h=Object(n.useState)(""),x=Object(l.a)(h,2),C=x[0],O=x[1],y=Object(n.useState)(null),k=Object(l.a)(y,2),S=k[0],A=k[1],I=Object(n.useState)(""),U=Object(l.a)(I,2),_=U[0],T=U[1],D=Object(n.useState)(""),z=Object(l.a)(D,2),L=z[0],P=z[1],F=Object(W.b)();return Object(n.useEffect)(Object($.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(j.severHostedUrl,"/assignment/allassignments"),{courseID:null===o||void 0===o?void 0:o._id});case 3:(t=e.sent)&&(F(H(t.data.allAssignments)),d(t.data.allAssignments)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),r.a.createElement(E.a,{sx:{maxWidth:"760px",margin:"0 auto"}},_?r.a.createElement(w,{openSnack:_,severity:L,text:_,setOpenSnack:T}):"",b&&a?r.a.createElement(ot,{checked:S,currentAssignmentID:b}):!a&&C?r.a.createElement(ct,{currentCourseID:C}):r.a.createElement(E.a,null,r.a.createElement(E.a,{display:"flex",justifyContent:"flex-end",px:2,width:"100%"},a?r.a.createElement($e,{btnTitle:"create",btnVariant:"contained",btnColor:"success",input2label:"Questions and Instructions",tooltipTitle:"Create Assignment",btnStartIcon:r.a.createElement(je.a,{size:"20px",color:"white"}),dialogTitle:"Create Assignment or Questions",actionTitle:"create",currentCourse:o,isTeacher:a,setOpenSnack:T,setSeverity:P,setAllAssignments:d}):r.a.createElement(R.a,{title:"Go to checked Assignments",arrow:!0},r.a.createElement(N.a,{onClick:function(){return O(null===o||void 0===o?void 0:o._id)},color:"success",sx:{marginTop:3,borderRadius:5},variant:"contained"},"Checked"))),r.a.createElement(E.a,{display:"flex",justifyContent:"flex-start",pb:1,px:2,width:"100%"},r.a.createElement(g.a,{variant:"h4",color:"green"},a?"":"Non Submitted ","Assignments")),(null===u||void 0===u?void 0:u.length)>0?null===u||void 0===u?void 0:u.map((function(e,n){if(!(null===e||void 0===e?void 0:e.submitted.find((function(e){return e.id===t._id}))))return r.a.createElement(et,{key:n,curUser:t,isTeacher:a,assignment:e,setCurrentAssignmentID:v,setChecked:A})})):r.a.createElement(E.a,{pt:9,borderTop:"1px solid green",width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently No Assignments"))))},it=Object(de.a)({class_materials:{width:"100vw",height:"100vh"}}),st=function(e){var t,a=e.curUser,o=e.setAuth,c=Object(W.c)((function(e){return e.usersReducer.currentCourse})),i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(""),v=Object(l.a)(p,2),h=v[0],g=(v[1],Object(n.useState)(null)),x=Object(l.a)(g,2),C=x[0],O=x[1],y=Object(n.useState)(!0),k=Object(l.a)(y,2),S=k[0],A=k[1],I=null===c||void 0===c||null===(t=c.students)||void 0===t?void 0:t.find((function(e){return e.id===(null===a||void 0===a?void 0:a._id)})),U=it(),_=Object(b.h)(),N=Object(b.g)(),T=Object(W.b)();return Object(n.useEffect)(Object($.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(j.severHostedUrl,"/course/specific"),{id:_.id});case 3:(t=e.sent).data.currentCourse?(T(B(t.data.currentCourse)),O(!0),A(!1)):(console.log(t.data.error),O(!1),A(!1),N.push("/")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Object(n.useEffect)((function(){Bt.on("CHANGE_IN_COURSE",(function(e){(null===c||void 0===c?void 0:c._id)===e._id&&T(B(e))}))}),[]),S?r.a.createElement(d,null):r.a.createElement(E.a,{className:U.class_materials},r.a.createElement(q,{curUser:a,setAuth:o}),C&&("student"===(null===a||void 0===a?void 0:a.roll)&&I||"teacher"===(null===a||void 0===a?void 0:a.roll)&&(null===c||void 0===c?void 0:c.teacher_id)===(null===a||void 0===a?void 0:a._id))?r.a.createElement(E.a,null,u?r.a.createElement(w,{openSnack:u,severity:h,text:u,setOpenSnack:m}):"",r.a.createElement(We,{tab1Label:"Stream",panel1:r.a.createElement(Ke,{currentCourse:c,curUser:a}),tab2Label:"teacher"===(null===a||void 0===a?void 0:a.roll)?"Class Work":"Assignments",panel2:r.a.createElement(lt,{isTeacher:"teacher"===(null===a||void 0===a?void 0:a.roll),currentCourse:c,curUser:a}),tab3Label:"teacher"===(null===a||void 0===a?void 0:a.roll)?"Students":"Announcement",panel3:"teacher"===(null===a||void 0===a?void 0:a.roll)?r.a.createElement(Ze,{currentCourse:c,curUser:a}):r.a.createElement(Qe,{currentCourse:c,curUser:a}),tab4Label:"teacher"===(null===a||void 0===a?void 0:a.roll)?"Announcement":"",panel4:"teacher"===(null===a||void 0===a?void 0:a.roll)?r.a.createElement(Qe,{currentCourse:c,curUser:a}):""})):N.push("/coursedetails"))};var ut=function(){return r.a.createElement("div",null,r.a.createElement(E.a,{sx:{color:"green",backgroundColor:"#fff",width:"100%",height:"100%"},open:!0},r.a.createElement(u.a,{color:"inherit"})))},dt=function(e){var t=e.curUser,a=e.id,o=e.allConversationsArray,c=Object(W.c)((function(e){return e.usersReducer.currentConversation})),i=Object(n.useState)({}),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),v=p[0],h=p[1],x=Object(n.useState)(""),C=Object(l.a)(x,2),O=C[0],y=C[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),A=S[0],I=S[1],U=Object(n.useState)(!0),_=Object(l.a)(U,2),T=_[0],D=_[1],R=Object(b.g)(),z=Object(W.b)(),L=t||{},P=L._id,F=L.fname,M=L.lname,B=function(){var e=Object($.a)(Z.a.mark((function e(){var a,n,r,o,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=A.trim())){e.next=12;break}return n="".concat(F," ").concat(M),r=Je()().format("hh:mm:ss A"),o={_id:null===u||void 0===u?void 0:u._id,senderID:P,name:n,time:r,message:a,recieverID:(null===t||void 0===t?void 0:t._id)===(null===u||void 0===u?void 0:u.user1ID)?null===u||void 0===u?void 0:u.user2ID:null===u||void 0===u?void 0:u.user1ID},e.next=8,f.a.post("".concat(j.severHostedUrl,"/user/sendmsg"),o);case 8:(c=e.sent)&&(c.data.message?(d(c.data.conversation),Bt.emit("changeInConversation",c.data.conversation),h(c.data.message),y("success")):(h(c.data.error),y("error")),I("")),e.next=14;break;case 12:h("write something"),y("error");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=null===o||void 0===o?void 0:o.find((function(e){return e._id===a}));z({type:"CURRENT_CONVERSATION",payload:e}),d(e),D(!1)}),[]),Object(n.useEffect)((function(){d(c)}),[c]),r.a.createElement(E.a,{mx:"auto",maxHeight:"85vh",sx:{overflowY:"auto"},maxWidth:"900px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",mt:5},v?r.a.createElement(w,{openSnack:v,severity:O,text:v,setOpenSnack:h}):"",r.a.createElement(E.a,{display:"flex",justifyContent:"flex-end",pb:1,pr:2,width:"100%"},r.a.createElement(N.a,{startIcon:r.a.createElement(tt.a,{size:"22px",color:"white"}),variant:"contained",onClick:function(){return R.push("/messages")},size:"small",color:"success",sx:{borderRadius:5}},"Back")),r.a.createElement(E.a,{display:"flex",borderBottom:"1px solid #00800085",justifyContent:"flex-start",pb:1,pl:2,width:"100%"},r.a.createElement(g.a,{variant:"h5",color:"green",sx:{textTransform:"capitalize"}},(null===t||void 0===t?void 0:t._id)===(null===u||void 0===u?void 0:u.user1ID)?null===u||void 0===u?void 0:u.user1Name:null===u||void 0===u?void 0:u.user2Name)),r.a.createElement(E.a,{width:"100%",display:"flex",flexDirection:"column",minHeight:"71vh",px:1.5},r.a.createElement(E.a,{width:"100%",flexGrow:1},T?r.a.createElement(ut,null):null===u||void 0===u?void 0:u.chat.map((function(e,a){return r.a.createElement(qe,{key:a,color:(null===t||void 0===t?void 0:t._id)===(null===e||void 0===e?void 0:e.senderID)?"green":"#ba000d",timeColor:(null===t||void 0===t?void 0:t._id)===(null===e||void 0===e?void 0:e.senderID)?"#2e7d32de":"#ba000db8",nameFirestLetter:(null===e||void 0===e?void 0:e.senderID)===u.user1ID?u.user1Name[0]:u.user2Name[0],name:(null===t||void 0===t?void 0:t._id)===(null===e||void 0===e?void 0:e.senderID)?"Me":(null===e||void 0===e?void 0:e.senderID)===u.user1ID?u.user1Name:u.user2Name,time:e.time,message:e.message})}))),r.a.createElement(Ge,{name:"message",autoFocus:!0,value:A,setValue:I,type:"text",placeholder:"Write Message...",color:"success",submitFunc:B,userName:null===t||void 0===t?void 0:t.fname[0]})))},mt=function(e){var t=e.curUser,a=e.setAuth,o=Object(W.c)((function(e){return e.usersReducer.allConversations})),c=Object(n.useState)(o),i=Object(l.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(""),m=Object(l.a)(d,2),p=m[0],b=m[1],v=Object(n.useState)(""),h=Object(l.a)(v,2),x=(h[0],h[1],Object(W.b)());return Object(n.useEffect)((function(){u(o),console.log("changedallConversations",o)}),[o]),Object(n.useEffect)(Object($.a)(Z.a.mark((function e(){var a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("".concat(j.severHostedUrl,"/user/myallconversations/").concat(null===t||void 0===t?void 0:t._id));case 3:(a=e.sent)&&(x({type:"ALL_CONVERSATIONS",payload:a.data.allConversations}),u(a.data.allConversations)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),r.a.createElement(E.a,{className:"msgs"},r.a.createElement(q,{curUser:t,setAuth:a}),p?r.a.createElement(dt,{id:p,allConversationsArray:s,curUser:t}):r.a.createElement(E.a,{mx:"auto",px:2,maxHeight:"85vh",sx:{overflowY:"auto"},maxWidth:"900px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},r.a.createElement(E.a,{mt:5,display:"flex",borderBottom:"1px solid #00800085",justifyContent:"flex-start",pb:1,px:2,width:"100%"},r.a.createElement(g.a,{variant:"h5",color:"green"},"All Conversation")),r.a.createElement(E.a,{width:"100%"},(null===s||void 0===s?void 0:s.length)>0?s.map((function(e,a){var n=(null===t||void 0===t?void 0:t._id)===e.user1ID;return r.a.createElement(E.a,{sx:{cursor:"pointer"},onClick:function(){return b(e._id)},mt:2,key:a,width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},r.a.createElement(E.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(E.a,{minWidth:"65px"},r.a.createElement(X.a,{sizes:"50px",sx:{bgcolor:"green",textTransform:"capitalize"}},n?e.user2Name[0]:e.user1Name[0])),r.a.createElement(E.a,null,r.a.createElement(g.a,{sx:{fontSize:"16px",textTransform:"capitalize"}},n?e.user2Name:e.user1Name))),r.a.createElement(E.a,{mt:1},r.a.createElement(g.a,{sx:{fontSize:"12px"},color:"green"},e.chat.length," Messages")))})):r.a.createElement(E.a,{pt:9,borderTop:"1px solid green",width:"100%",textAlign:"center"},r.a.createElement(g.a,{variant:"h6",color:"green"},"Currently You Have No Conversation")))))},pt=a(149),bt=["children","auth","SuccessComp","FailComp","isAdmin","AdminComp"],vt=function(e){e.children;var t=e.auth,a=e.SuccessComp,n=e.FailComp,o=e.isAdmin,c=e.AdminComp,l=Object(pt.a)(e,bt);return r.a.createElement(b.b,Object.assign({},l,{render:function(){return t&&o?c:t&&!o?a:n}}))},ft=a(474),Et=a(489),ht=a(497),gt=a(483),xt=a(472),Ct=a(473),Ot=a(229);var yt=function(e){var t,a=e.window,r=n.useState(!1),o=Object(l.a)(r,2),c=o[0],i=o[1],s=n.useState(null===(t=e.Component)||void 0===t?void 0:t.key),u=Object(l.a)(s,2),d=u[0],m=u[1],p=function(){i(!c)},b=n.createElement("div",null,n.createElement(D.a,{sx:{textAlign:"center"}},n.createElement(g.a,{variant:"h6",color:"#fff",sx:{cursor:"pointer"}},"School App")),n.createElement(ht.a,{sx:{color:"#fff",textTransform:"capitalize",py:0}},[{label:"teachers",icon:n.createElement(Ot.a,{color:"#fff",size:"24px"})},{label:"students",icon:n.createElement(O.a,{color:"#fff",size:"24px"})},{label:"courses",icon:n.createElement(nt.b,{color:"#fff",size:"24px"})}].map((function(e,t){return n.createElement(gt.a,{button:!0,key:t,component:P.b,to:"".concat(e.label),onClick:function(){return m(e.label)},sx:{backgroundColor:e.label===d?"darkgreen":"","&:hover":{backgroundColor:"darkgreen"}}},n.createElement(xt.a,null,e.icon),n.createElement(Ct.a,{primary:e.label}))}))),n.createElement(x.a,{sx:{backgroundColor:"white"}}),n.createElement(ht.a,{sx:{color:"#fff",textTransform:"capitalize",py:0}},[{label:"inbox",icon:n.createElement(y.b,{color:"#fff",size:"24px"})},{label:"blocked",icon:n.createElement(nt.a,{color:"#fff",size:"24px"})}].map((function(e,t){return n.createElement(gt.a,{button:!0,key:t,component:P.b,to:"".concat(e.label),onClick:function(){return m(e.label)},sx:{backgroundColor:e.label===d?"darkgreen":"","&:hover":{backgroundColor:"darkgreen"}}},n.createElement(xt.a,null,e.icon),n.createElement(Ct.a,{primary:e.label}))}))),n.createElement(x.a,{sx:{backgroundColor:"white"}})),v=void 0!==a?function(){return a().document.body}:void 0;return n.createElement(E.a,{sx:{display:"flex"}},n.createElement(ft.a,null),n.createElement(T.a,{color:"success",position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")}}},n.createElement(D.a,null,n.createElement(z.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:p,sx:{mr:2,display:{sm:"none"}}},n.createElement(y.c,{size:"22px",color:"white"})),n.createElement(g.a,{variant:"h6",noWrap:!0,component:"div"},n.createElement("strong",null," Admin Dashboard")))),n.createElement(E.a,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders"},n.createElement(Et.a,{container:v,variant:"temporary",color:"success",open:c,onClose:p,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240,backgroundColor:"#2e7d32"}}},b),n.createElement(Et.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240,backgroundColor:"#2e7d32"}},open:!0},b)),n.createElement(E.a,{component:"main",sx:{flexGrow:1,p:2,mt:"40px",width:{sm:"calc(100% - ".concat(240,"px)")}}},e.Component))},jt=(a(513),a(514),a(515),a(153),["expand"]);Object(I.a)((function(e){e.expand;var t=Object(pt.a)(e,jt);return n.createElement(z.a,t)}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));var kt=a(517),St=a(521),wt=a(520),At=a(516),It=a(518),Ut=a(486),_t=a(519),Nt=[{id:"name",label:"Name",minWidth:170},{id:"code",label:"ISO\xa0Code",minWidth:100},{id:"population",label:"Population",minWidth:170,align:"right",format:function(e){return e.toLocaleString("en-US")}},{id:"size",label:"Size\xa0(km\xb2)",minWidth:170,align:"right",format:function(e){return e.toLocaleString("en-US")}},{id:"density",label:"Density",minWidth:170,align:"right",format:function(e){return e.toFixed(2)}}];function Tt(e,t,a,n){return{name:e,code:t,population:a,size:n,density:a/n}}var Dt=[Tt("India","IN",1324171354,3287263),Tt("China","CN",1403500365,9596961),Tt("Italy","IT",60483973,301340),Tt("United States","US",327167434,9833520),Tt("Canada","CA",37602103,9984670),Tt("Australia","AU",25475400,7692024),Tt("Germany","DE",83019200,357578),Tt("Ireland","IE",4857e3,70273),Tt("Mexico","MX",126577691,1972550),Tt("Japan","JP",126317e3,377973),Tt("France","FR",67022e3,640679),Tt("United Kingdom","GB",67545757,242495),Tt("Russia","RU",146793744,17098246),Tt("Nigeria","NG",200962417,923768),Tt("Brazil","BR",210147125,8515767)];function Rt(){var e=n.useState(0),t=Object(l.a)(e,2),a=t[0],r=t[1],o=n.useState(10),c=Object(l.a)(o,2),i=c[0],s=c[1];return n.createElement(K.a,{sx:{width:"100%",overflow:"hidden"}},n.createElement(At.a,{sx:{maxHeight:440}},n.createElement(kt.a,{stickyHeader:!0,"aria-label":"sticky table"},n.createElement(It.a,null,n.createElement(_t.a,null,Nt.map((function(e){return n.createElement(wt.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),n.createElement(St.a,null,Dt.slice(a*i,a*i+i).map((function(e){return n.createElement(_t.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.code},Nt.map((function(t){var a=e[t.id];return n.createElement(wt.a,{key:t.id,align:t.align},t.format&&"number"===typeof a?t.format(a):a)})))}))))),n.createElement(Ut.a,{rowsPerPageOptions:[10,25,100],component:"div",count:Dt.length,rowsPerPage:i,page:a,onPageChange:function(e,t){r(t)},onRowsPerPageChange:function(e){s(+e.target.value),r(0)}}))}var zt=function(){var e=Object(W.c)((function(e){return e.usersReducer.users})),t=Object(n.useState)([]),a=Object(l.a)(t,2),o=(a[0],a[1]);return Object(n.useEffect)((function(){var t=null===e||void 0===e?void 0:e.filter((function(e){return"teacher"===e.roll}));o(t)}),[]),r.a.createElement(E.a,{width:"100%"},r.a.createElement(J.a,{container:!0},r.a.createElement(Rt,null)))},Lt=function(){return r.a.createElement(E.a,{width:"100%",sx:{backgroundColor:"red"}},r.a.createElement("h1",null,"Hi Mr Students"))},Pt=function(){return r.a.createElement(E.a,null,"Courses")},Wt=function(){return r.a.createElement(E.a,null,"Inbox")},Ft=function(){return r.a.createElement(E.a,null,"Blocked")},Mt=j.severHostedUrl,Bt=Object(i.a)(Mt,{transports:["websocket"]}),Ht=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),i=Object(l.a)(c,2),s=i[0],u=i[1],m=localStorage.getItem("uid"),p=Object(W.c)((function(e){return e.usersReducer.curUser})),v=Object(n.useState)(m||p._id),E=Object(l.a)(v,2),h=E[0],g=E[1],x=Object(n.useState)(!0),C=Object(l.a)(x,2),O=C[0],y=C[1],k=Object(W.b)();return Object(n.useEffect)((function(){var e;(s||h||y(!1),h||s)&&(y(!0),u(!0),f.a.get("".concat(j.severHostedUrl,"/user/getdata")).then((function(t){var a,n=t.data;(e=n.find((function(e){return e._id===m})))?(k(F(e)),(null===(a=e)||void 0===a?void 0:a.isAdmin)?(o(!0),k(function(e){return{type:"GET_USERS",payload:e}}(n))):("teacher"===e.roll&&f.a.post("".concat(j.severHostedUrl,"/course/mycourse"),{teacher_id:e._id}).then((function(e){var t=e.data.course;k(M(t))})).catch((function(e){return console.log(e)})),"student"===e.roll&&e.atClass&&f.a.post("".concat(j.severHostedUrl,"/course/forstudent"),{studentClass:e.atClass,studentID:m}).then((function(e){var t=e.data.courses;k(function(e){return{type:"GET_Student_COURSES",payload:e}}(t))})).catch((function(e){return console.log(e)})))):(y(!1),g(!1));g(!0),y(!1)})).catch((function(e){return console.log(e)})),Bt.on("connect",(function(){})),Bt.on("courseADDEDByTeacher",(function(t){var a,n;"student"===(null===(a=e)||void 0===a?void 0:a.roll)&&(null===(n=e)||void 0===n?void 0:n.atClass)==(null===t||void 0===t?void 0:t.teacherClass)&&k({type:"EDIT_AVAILABLE_COURSES",payload:t})})),Bt.on("courseEditedByTeacher",(function(t){var a,n;"student"===(null===(a=e)||void 0===a?void 0:a.roll)&&(null===(n=e)||void 0===n?void 0:n.atClass)==(null===t||void 0===t?void 0:t.teacherClass)&&k({type:"UPDATE_COURSES",payload:t})})),Bt.on("messageAddedStream",(function(e){k({type:"UPDATE_CURRENT_COURSE",payload:e})})),Bt.on("CHANGE_IN_CONVERSATION",(function(t){var a;((null===(a=e)||void 0===a?void 0:a._id)===t.user1ID||t.user2ID)&&k({type:"UPDATE_CURRENT_CONVERSATION",payload:t})})),Bt.on("ASSIGNMENT_ADDED",(function(e){k({type:"UPDATE_ALL_ASSIGNMENTS",payload:e})})))}),[s,Mt]),O?r.a.createElement(d,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,r.a.createElement(b.d,null,r.a.createElement(vt,{auth:s,isAdmin:a,path:"/teachers",AdminComp:r.a.createElement(yt,{setAuth:u,Component:r.a.createElement(zt,{currentUser:p,key:"teachers"})}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/students",AdminComp:r.a.createElement(yt,{setAuth:u,Component:r.a.createElement(Lt,{currentUser:p,key:"students"})}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/courses",AdminComp:r.a.createElement(yt,{setAuth:u,Component:r.a.createElement(Pt,{currentUser:p,key:"courses"})}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/inbox",AdminComp:r.a.createElement(yt,{setAuth:u,Component:r.a.createElement(Wt,{currentUser:p,key:"inbox"})}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/blocked",AdminComp:r.a.createElement(yt,{setAuth:u,Component:r.a.createElement(Ft,{currentUser:p,key:"blocked"})}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,exact:!0,path:"/",AdminComp:r.a.createElement(b.a,{to:"/teachers",curUser:p,setAuth:u}),SuccessComp:r.a.createElement(b.a,{to:"/profile",curUser:p,setAuth:u}),FailComp:r.a.createElement(A,{setAuth:u})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/profile",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(ue,{curUser:p,setAuth:u}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/coursedetails",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(He,{curUser:p,setAuth:u}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/messages",AdminComp:r.a.createElement(mt,{curUser:p,setAuth:u}),SuccessComp:r.a.createElement(mt,{curUser:p,setAuth:u}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/attendance",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(he,{curUser:p,setAuth:u}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/classmaterials",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(b.a,{to:"/profile",curUser:p}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/:id",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(st,{curUser:p,setAuth:u}),FailComp:r.a.createElement(b.a,{to:"/"})}),r.a.createElement(vt,{auth:s,isAdmin:a,path:"/*",AdminComp:r.a.createElement(b.a,{to:"/teachers"}),SuccessComp:r.a.createElement(b.a,{to:"/profile"}),FailComp:r.a.createElement(b.a,{to:"/"})}))))},Gt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,522)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))},Yt=a(148),Vt={users:[],curUser:{},course:{},studentCourse:[],currentCourse:null,currentAssignment:null,allAssignments:null,checkedAssignments:null,allConversations:[],currentConversation:null},qt=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"GET_USERS":return Object(p.a)(Object(p.a)({},n),{},{users:r.payload});case"CUR_USER":return Object(p.a)(Object(p.a)({},n),{},{curUser:r.payload});case"GET_COURSE":return Object(p.a)(Object(p.a)({},n),{},{course:r.payload});case"GET_Student_COURSES":return Object(p.a)(Object(p.a)({},n),{},{studentCourse:r.payload});case"EDIT_AVAILABLE_COURSES":var o=null===(e=n.studentCourse)||void 0===e?void 0:e.find((function(e){return e._id===r.payload._id}));return o?n:Object(p.a)(Object(p.a)({},n),{},{studentCourse:[].concat(Object(xe.a)(n.studentCourse),[r.payload])});case"UPDATE_COURSES":var c=n.studentCourse.find((function(e){return e._id===r.payload._id}));if(c){c=r.payload;var l=n.studentCourse.filter((function(e){return e._id!==r.payload._id})),i=[].concat(Object(xe.a)(l),[c]);return Object(p.a)(Object(p.a)({},n),{},{studentCourse:i})}return n;case"CURRENT_COURSE":return Object(p.a)(Object(p.a)({},n),{},{currentCourse:r.payload});case"UPDATE_CURRENT_COURSE":return n.currentCourse&&n.currentCourse._id===r.payload._id?Object(p.a)(Object(p.a)({},n),{},{currentCourse:r.payload}):n;case"ALL_ASSIGNMENTS":return Object(p.a)(Object(p.a)({},n),{},{allAssignments:r.payload});case"CURRENT_ASSIGNMENT":return Object(p.a)(Object(p.a)({},n),{},{currentAssignment:r.payload});case"CHECKED_ASSIGNMENTS":return Object(p.a)(Object(p.a)({},n),{},{checkedAssignments:r.payload});case"UPDATE_ALL_ASSIGNMENTS":return n.allAssignments&&n.allAssignments[0].courseID===r.payload[0].courseID?Object(p.a)(Object(p.a)({},n),{},{allAssignments:r.payload}):n;case"ALL_CONVERSATIONS":return Object(p.a)(Object(p.a)({},n),{},{allConversations:r.payload});case"CURRENT_CONVERSATION":return Object(p.a)(Object(p.a)({},n),{},{currentConversation:r.payload});case"UPDATE_CURRENT_CONVERSATION":var s=null===(t=n.allConversations)||void 0===t?void 0:t.filter((function(e){return e._id!==r.payload._id}));return(null===(a=n.currentConversation)||void 0===a?void 0:a._id)===r.payload._id?Object(p.a)(Object(p.a)({},n),{},{allConversations:[].concat(Object(xe.a)(s),[r.payload]),currentConversation:r.payload}):Object(p.a)(Object(p.a)({},n),{},{allConversations:[].concat(Object(xe.a)(s),[r.payload])});case"LOG_OUT":return Vt;default:return n}},Xt=Object(Yt.a)({usersReducer:qt}),Jt=Object(Yt.b)(Xt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W.a,{store:Jt},r.a.createElement(Ht,null))),document.getElementById("root")),Gt()}},[[259,1,2]]]);
//# sourceMappingURL=main.955b1e06.chunk.js.map